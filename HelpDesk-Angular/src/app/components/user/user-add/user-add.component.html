<app-header-user></app-header-user>

<div id="content" class="container mt-5">
    <div class="card bg-light">
        <div class="card-body mx-auto ">
            <p class="card-title text-center mt-3">Registrar Usuario</p>
            <hr>
            <form class="example-form" [formGroup]="addUserForm" #formDir="ngForm" (ngSubmit)="register()" autocomplete="off">
                <div class="form-group mx-auto mb-2">
                    <mat-form-field class="example-full-width mb-2">
                      <mat-label>Nombre</mat-label>
                      <input maxlength="50" minlength="3" type="text" formControlName="name" placeholder="Nombre" matInput>
                      <mat-hint class="text-danger" *ngIf="addUserForm.hasError('required', 'name') && formDir.submitted">
                          *Campo requerido
                      </mat-hint>
                      <mat-hint class="text-danger" *ngIf="addUserForm.hasError('pattern', 'name') 
                          || addUserForm.hasError('minlength', 'name')
                          || addUserForm.hasError('maxlength', 'name')
                          && formDir.submitted">
                          *Campo inválido
                      </mat-hint>
                    </mat-form-field>

                    <mat-form-field class="example-full-width mb-2">
                        <mat-label>Primer Apellido</mat-label>
                        <input maxlength="50" minlength="3" type="text" formControlName="firstName" placeholder="Primer Apellido" matInput>
                        <mat-hint class="text-danger" *ngIf="addUserForm.hasError('required', 'firstName') && formDir.submitted">
                            *Campo requerido
                        </mat-hint>
                        <mat-hint class="text-danger" *ngIf="addUserForm.hasError('pattern', 'firstName') 
                            || addUserForm.hasError('minlength', 'firstName')
                            || addUserForm.hasError('maxlength', 'firstName')
                            && formDir.submitted">
                            *Campo inválido
                        </mat-hint>
                    </mat-form-field>

                    <mat-form-field class="example-full-width mb-2">
                      <mat-label>Segundo Apellido</mat-label>
                      <input maxlength="50" minlength="3" type="text" formControlName="secondName" placeholder="Segundo Apellido" matInput>
                      <mat-hint class="text-danger" *ngIf="addUserForm.hasError('required', 'secondName') && formDir.submitted">
                          *Campo requerido
                      </mat-hint>
                      <mat-hint class="text-danger" *ngIf="addUserForm.hasError('pattern', 'secondName') 
                          || addUserForm.hasError('minlength', 'secondName')
                          || addUserForm.hasError('maxlength', 'secondName')
                          && formDir.submitted">
                          *Campo inválido
                      </mat-hint>
                    </mat-form-field>

                    <mat-form-field class="example-full-width mb-2">
                        <mat-label>Email</mat-label>
                        <input maxlength="320" type="email" formControlName="email" matInput>
                        <mat-hint class="text-danger" *ngIf="addUserForm.hasError('required', 'email') && formDir.submitted">
                            *Campo requerido
                        </mat-hint>
                        <mat-hint class="text-danger" *ngIf="addUserForm.hasError('email', 'email') 
                                || addUserForm.hasError('minlength', 'email')
                                || addUserForm.hasError('maxlength', 'email')
                                && formDir.submitted">
                            *Correo inválido
                        </mat-hint>
                    </mat-form-field>

                    <mat-form-field class="example-full-width mb-2">
                      <mat-label>Contraseña</mat-label>
                      <input maxlength="8" [type]="hide ? 'text' : 'password'" type="password" formControlName="password" placeholder="Contraseña" matInput>
                      <button type="button" mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                        <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                      </button>
                      <mat-hint class="text-danger" *ngIf="addUserForm.hasError('required', 'password') && formDir.submitted">
                        *Campo requerido
                      </mat-hint>
                      <mat-hint class="text-danger" *ngIf="addUserForm.hasError('pattern', 'password')
                        || addUserForm.hasError('minlength', 'password') 
                        || addUserForm.hasError('maxlength', 'password')
                        && formDir.submitted">
                        *8 carácteres, al menos 1 mayúscula, 1 minúscula, 1 número, 1 símbolo
                      </mat-hint>
                    </mat-form-field>


                    <mat-label>Seleccione el rol del usuario: </mat-label>
                    <mat-radio-group aria-label="Escoja el role del usuario:" formControlName="control">
                      <mat-radio-button value="1" color="primary">Soporte</mat-radio-button>
                      <mat-radio-button value="2" color="primary">Supervisor</mat-radio-button>
                      <!--I used if is "touched" to don't show the error until submit-->
                    </mat-radio-group>

                    <div class="form-group mb-2 mt-4" formGroupName="servicesCheckboxGroup">
                      <mat-label>Selecciona tus servicios:</mat-label>
                      <section class="example-section">
                          <mat-checkbox class="example-margin" color="primary" formControlName="mobilePhone">Telefonía movil</mat-checkbox>
                          <mat-checkbox class="example-margin" color="primary" formControlName="channel">Cable</mat-checkbox>
                          <mat-checkbox class="example-margin" color="primary" formControlName="internet">Internet</mat-checkbox>
                          <mat-checkbox class="example-margin" color="primary" formControlName="fixedTelephony">Telefonía fija</mat-checkbox>
                      </section>
                      <mat-hint class="text-danger service-alert"
                        *ngIf="addUserForm.controls['servicesCheckboxGroup'].errors && addUserForm.controls['servicesCheckboxGroup'].errors.requireCheckboxesToBeChecked">
                      <small>*Elija al menos un servicio</small></mat-hint>
                    </div>
                    <hr>
                    <div class="d-flex justify-content-center">
                      <button type="submit" class="bg-primary text-white mb-3" mat-raised-button>Aceptar</button>
                      <button type="submit" class="bg-danger  text-white mb-3" id="button_cancel" (click)="clear()" mat-raised-button>Cancelar</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>