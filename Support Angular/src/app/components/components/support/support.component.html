<app-nav-menu></app-nav-menu>

<div class="container mt-5">
    <br>
    <div class="text-center">
        <h3>Registro de Soportista</h3>
    </div>
    
    <br>
    <!--<form [formGroup]="supportForm" (ngSubmit)="save()" #formDir="ngForm" novalidate>-->
    <form [formGroup]="form" (ngSubmit)="submit()">
        <div class="form-group">
            <label>Nombre: </label>
            <input id="Name" type="text" formControlName="name" class="form-control"
            [ngClass]="{ 'is-invalid': submitted && this.name.errors }" />
            <div *ngIf="submitted && this.name.errors" class="invalid-feedback">
                <div *ngIf="this.name.errors.required">Se requiere el nombre</div>
                <div *ngIf="this.name.errors.pattern">Solo se permiten letras</div>
            </div>
        </div>

        <div class="form-group">
        <label>Primer apellido: </label>
        <input id="First_L" type="text" formControlName="First_L" class="form-control"
            [ngClass]="{ 'is-invalid': submitted && this.First_L.errors }" />
        <div *ngIf="submitted && this.First_L.errors" class="invalid-feedback">
            <div *ngIf="this.First_L.errors.required">Se requiere el primer apellido</div>
            <div *ngIf="this.First_L.errors.pattern">Solo se permiten letras</div>
        </div>
        </div>

        <div class="form-group">
            <label>Segundo apellido: </label>
            <input id="Second_L" type="text" formControlName="Second_L" class="form-control"
            [ngClass]="{ 'is-invalid': submitted && this.Second_L.errors }" />
            <div *ngIf="submitted && this.Second_L.errors" class="invalid-feedback">
                <div *ngIf="this.Second_L.errors.required">Se requiere el segundo apellido</div>
                <div *ngIf="this.Second_L.errors.pattern">Solo se permiten letras</div>
            </div>
        </div>

        <div class="form-group">
            <label>Correo electrónico: </label>
            <input id="Email" type="text" formControlName="email" class="form-control"
            [ngClass]="{ 'is-invalid': submitted && this.email.errors }" />
            <div *ngIf="submitted && this.email.errors" class="invalid-feedback">
                <div *ngIf="this.email.errors.required">Se requiere el correo</div>
                <div *ngIf="this.email.errors.email">Debe ingresar un correo válido, con mínimo 10 caracteres.</div>
            </div>
        </div>

        <div class="form-group">
            <label>Contraseña: </label>
            <input  id="Pass" type="password" formControlName="pass" class="form-control" maxlength="8" minlength="8"
            [ngClass]="{ 'is-invalid': submitted && this.pass.errors }" />
            <div *ngIf="submitted && this.pass.errors" class="invalid-feedback">
                <div *ngIf="this.pass.errors.required">Se requiere la contraseña</div>
                <div *ngIf="this.pass.errors">La contraseña debe llevar, una mayúscula, una minúscula, un número, un simbolo y extensión mínima de 8 caracteres.</div>
            </div>
        </div>

        <div class="form-group mb-2">
            <div>
              <label>Servicios:</label>
              <div formArrayName="services"
                  *ngFor="let service of servicesData; let i = index">
                <input type="checkbox" [formControlName]="i" />
                {{service.name}}
              </div>
            </div>
        </div>

        <div *ngIf="submitted && !this.isSelectedCheckboxes()" class="text-danger">
            <p>Debe seleccionar al menos un servicio</p>
        </div>

        <div class="form-group">
            <button class="btn btn-primary">Registrarse</button>
        </div>

        <div class="form-group">
            <div *ngIf="loading" class="alert alert-info form-group row">Registrando...</div>
            <div *ngIf="error" class="alert alert-danger form-group row">{{error}}</div>
        </div>
    </form>
</div>
